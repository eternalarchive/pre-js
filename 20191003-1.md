# 5. 데이터 타입

### 1. 데이터 타입이란 무엇인가? 왜 필요한가?

- 데이터 타입(Data Type) : 값의 종류
- 자바스크립트의 모든 값은 데이터 타입을 갖음

#### 1.1 데이터 타입에 의한 메모리 공간의 확보

- 프로그래밍 언어에서 사용할 수 있는 모든 값은 메모리에 저장하고 참조할 수 있어야 함
- 값의 종류에 따라 확보해야 할 메모리의 크기가 다르므로 메모리에 값을 저장하기 위해서는 확보해야할 메모리 공간의 크기를 알아야 함

> ECMAScript 사양은 데이터 타입의 크기를 명시적으로 규정하고 있지 않으며 데이터 타입에 따라 확보되는 메모리 공간의 크기는 브라우저 제조사의 구현에 따라 다를 수 있음

#### 1.2 데이터 타입에 의한 값의 해석

- 식별자 score를 통해 숫자 타입의 값 100이 저장되어 있는 메모리 공간의 선두 메모리 셀의 주소를 찾아갈 수 있음
- 컴퓨터는 한 번에 읽어들어야 할 메모리 공간의 크기, 즉 메모리 셀의 개수(byte 수)를 알아야 함(값의 손실이 없는 크기로)

```javascript
// binary => decimal
console.log(parseInt('01000001', 2)); // 65
// binary => Unicode
console.log(String.fromCharCode(parseInt('01000001', 2))); // A
```

- 변수 score를 숫자 타입이라 하자. 컴퓨터는 변수 score가 가리키는 메모리 공간 주소에서 읽어들인 2진수를 숫자로 해석함
  - 2진수 0100 0001을 숫자로 해석하면 65, 문자는 대문자 A로 해석함

*** 데이터 타입이 필요한 이유**

- 값을 저장할 때 확보해야 하는 **메모리 공간의 크기**를 결정하기 위해
- 값을 참조할 때 한번에 읽어들여야 할 **메모리 공간의 크기**를 결정하기 위해
- 메모리에서 읽어들인 **2진수를 어떻게 해석할지** 결정하기 위해



### 2. 값(Value)

- **값(Value)** : 더 이상 평가할 수 없는 하나의 표현식
- 자바스크립트는 7가지의 데이터 타입의 값 존재
- 표현식 : 값을 생성하는 문
  - 값 : 10과 20
  - 연산자 : +

```javascript
// 10 + 20은 표현식이다. 이 표현식은 평가되어 30이라는 값을 만든다.
10 + 20
```

- 표현식 10 + 20을 평가하면 30이지만 값 30을 평가하면 언제나 30
- 변수(Variable) : 하나 값을 저장할 수 있는 메모리 공간에 붙인 이름 또는 메모리 공간 자체
  - 값은 변수에 할당할 수 있음
  - 변수 sum에 할당되는 것은 표현식이 아니라 표현식이 평가되어 생성한 값 30

```javascript
// 변수에는 표현식 10 + 20의 평가되어 생성한 값 30이 할당된다.
var sum = 10 + 20;
```

- 더 이상 평가할 수 없는 하나의 표현식인 값 : 실제 메모리 공간이 저장되는 최소 단위



### 3. 값의 생성

- 값은 다양한 방법으로 생성 가능
- 기본적 방법 : 리터럴 표기법
  - 다른 방법은 표현식으로 값을 생성하는 것

#### 3.1 리터럴

- 리터럴(literal) : 소스 코드 안에서 직접 만들어 낸 고정값 자체
- 리터럴 표기법(Literal notation)으로 생성

##### 3.1.1 리터럴 표기법을 통한 값의 생성

- 사람이 이해할 수 있는 표기법으로 값의 생성을 자바스크립트 엔진에게 명령

> 이 예제의 경우 사람이 이해할 수 있는 표기법인 아바리아 숫자 표기법 사용

```javascript
// 리터럴 표기법으로 숫자 리터럴 3을 기술하였다.
// 자바스크립트 엔진은 런타임에 숫자 리터럴 3을 해석하여 숫자 타입의 값 3을 생성한다.
3
```

- 리터럴 표기법으로 기술한 리터럴은 자바스크립트 엔진에 의해 해석되어 값으로 평가
  - 자바스크립트 엔진은 리터럴 표기법으로 작성된 코드(리터럴)을 만나면, 코드가 실행되는 시점(런타임, runtime)에 리터럴을 해석하고 리터럴에 상응하는 값 생성
  - 리터럴은 결국 값이 되므로 리터럴을 값 자체라고 표현할 때가 많음

```javascript
// 리터럴 10과 리터럴 20은 표현식의 일부이다.
10 + 20
```

- 리터럴 표기법을 사용하면 아래와 같이 자바스크립트에서 사용할 수 있는 다양한 타입의 값을 생성할 수 있음
  - 숫자, 문자열, 불리언, null, undefined, 객체, 배열, 함수, 정규 표현식 등

```javascript
// 정수 리터럴
100
// 부동 소숫점 리터럴
10.5
// 2진수 리터럴(0b로 시작)
0b01000001
// 8진수 리터럴(ES6에서 도입. 0o로 시작)
0o101
// 16진수 리터럴(ES6에서 도입. 0x로 시작)
0x41

// 문자열 리터럴
'Hello'
"World"

// 불리언 리터럴
true
false

// null 리터럴
null

// undefined 리터럴
undefined

// 객체 리터럴
{ name: 'Lee', gender: 'male' }

// 배열 리터럴
[ 1, 2, 3 ]

// 함수 리터럴
function() {}

// 정규표현식 리터럴
/ab+c/
```

```javascript
// 표기법만 다를 뿐 같은 값이다.
console.log(0b01000001 === 65);    // true
console.log(0b01000001 === 0o101); // true
console.log(0b01000001 === 0x41);  // true
```



##### 3.1.2 값과 리터럴의 관계

```javascript
var score = 50 + 50;
```

- 우변은 두개의 리터럴 50을 + 연산자를 사용해 합산하여 새로운 값 100 생성
- 표현식(expresstion) : 프로그램 내에서 값을 생성하는 문

- 리터럴은 그 자체로 값이 될 수 있지만 값이 리터럴인 것은 아님
  - 리터럴 100은 자바스크립트 엔진에 의해 평가되어 숫자값 100이 되지만 숫자값 100은 리터럴이 아님



#### 3.2 표현식

- **표현식(expresstion) : 값을 생성하는 다양한 방법**
- 표현식은 리터럴, 식별자, 연산자, 함수 호출 등의 조합
- 평가(evaluation) : 표현식을 해석하여 하나의 값을 만드는 과정
- 표현식은 하나의 값으로 평가될 수 있는 문(statement)
  - 다양한 표현식이 있지만 하나의 값으로 평가된다는 점에서 동일

```javascript
// 리터럴 표현식
10
'Hello'

// 식별자 표현식(선언이 이미 존재한다고 가정)
sum
person.name
arr[1]

// 연산자 표현식
10 + 20
sum = 10
sum !== 10

// 함수/메소드 호출 표현식(선언이 이미 존재한다고 가정)
square()
person.getName()
```



### 4. 데이터 타입의 분류

> 자바스크립트의 모든 값은 데이터를 갖음

- 자바스크립트(ES6)는 7개의 데이터 타입을 제공
- 원시 타입(primitive type)과 객체 타입(object/reference type)으로 분류
- 원시 타입(primitive type)
  - 숫자(number) 타입 : 숫자 (정수, 실수)
  - 문자열(string) 타입 : 문자열
  - 불리언(boolean) 타입 : 논리적 참(true)과 거짓(false)
  - undefined 타입 : 선언은 되었지만 값을 할당하지 않은 변수에 암묵적으로 할당되는 값
  - null 타입 : 값이 없다는 것을 의도적으로 명시할 때 사용하는 값
  - Symbol 타입 : ES6에서 새롭게 추가된 7번째 타입

- 숫자 타입의 값은 주로 산술 연술을 위해 만들지만 문자열 타입의 값은 주로 텍스트를 화면에 출력하기 위해 만듦
  - 숫자 1과 문자열 '1'은 전혀 다른 값 :  확보해야 할 메모리 공간의 크기도 다르고 메모리에 저장되는 2진수도 다르며 읽어 들여 해석하는 방식도 다름



### 5. 숫자 타입

- 자바스크립트는 정수의 실수의 구분 없이 하나의 숫자 타입만 존재
- ECMAScript 사양에 따르면 숫자 타입의 값 : 배정밀도 64비터 부동소수점 형식
  - ([double-precision 64-bit floating-point format](https://en.wikipedia.org/wiki/Double-precision_floating-point_format) : -(253 -1) ~ 253 -1 사이의 숫자 값)
  - 모든 수를 실수로 처리하며 정수만을 표현하기 위한 특별한 데이터 타입(integer type)은 없음

```javascript
// 모두 숫자 타입이다.
var integer = 10;    // 정수
var double = 10.12;  // 실수
var negative = -20;  // 음의 정수
```

- 자바스크립트는 2진수, 8진수, 16진수를 표현하기 위한 데이터 타입을 제공하지 않으므로 이들 값을 참조하면 모두 10진수로 해석

```javascript
var binary = 0b01000001; // 2진수
var octal = 0o101;       // 8진수
var hex = 0x41;          // 16진수

// 표기법만 다를 뿐 모두 같은 값이다.
console.log(binary); // 65
console.log(octal);  // 65
console.log(hex);    // 65
console.log(binary === octal); // true
console.log(octal === hex);    // true
```

- 정수로 표시된다 해도 실수로 처리되므로 정시로 표시되는 수끼리 나누더라도 실수가 나올 수 있음

```javascript
// 숫자 타입은 모두 실수로 처리된다.
console.log(1 === 1.0); // true
console.log(4 / 2);     // 2
console.log(3 / 2);     // 1.5
```

- 추가적으로 특별한 숫자 타입 세가지
  - Infinity : 양의 무한대
  - -Infinity : 음의 무한대
  - NaN : 산술 연산 불가(not-a-number)

```javascript
// 숫자 타입의 3가지 특별한 값
console.log(10 / 0);       // Infinity
console.log(10 / -0);      // -Infinity
console.log(1 * 'String'); // NaN
```

- 자바스크립트는 대소문자를 구별(case-sensitive)하므로 NaN을 Nan, nan과 같이 표현하면 에러 발생하므로 주의할 것



### 6. 문자열 타입

- 문자열(String) 타입 : 텍스트 데이터
- 0개 이상의 16bit 유니코드 문자(UTF-16)들의 집합으로 전세계 대부분의 문자 표현 가능
- 일반적으로 작은 따옴표 안에 텍스트를 넣어 생성
- 원시 타입이며 변경 불가능한 값(Immutable value) : 한 번 문자열이 생성되면 그 문자열을 변경할 수 없음

```javascript
// 문자열 타입
var string;
string = "문자열"; // 큰 따옴표
string = '문자열'; // 작은 따옴표
string = `문자열`; // 백틱 (ES6)

string = "큰 따옴표로 감싼 문자열 내의 '작은 따옴표'는 문자열로 인식된다.";
string = '작은 따옴표로 감싼 문자열 내의 "큰 따옴표"는 문자열로 인식된다.';
```



#### 6.1 템플릿 리터럴

- ES6부터 템플릿 리터럴(Template literal)이라고 불리는 새로운 문자열 표기법 도입
- 백틱(backtick)문자 사용
  - 일반적인 문자열 : 줄바꿈은 허용되지 않으며 공백(white space)를 표현하기 위해서는 백슬래시로 시작하는 이스케이프 시퀀스(Escape Sequence)를 사용하여야 함
  - ES6 템플릿 리터럴 : 여러 줄에 걸쳐 문자열 작성 가능, 공백 그대로 적용

| 이스케이프 시퀀스 | 의미                             |
| :---------------- | :------------------------------- |
| \0                | Null                             |
| \b                | 백스페이스                       |
| \f                | 새로운 페이지                    |
| \n                | 개행(LF, Line Feed)              |
| \r                | 캐리지 리턴(CR, Carriage Return) |
| \t                | 탭(수평)                         |
| \v                | 탭(수직)                         |
| \’                | 작은 따옴표                      |
| \”                | 큰 따옴표                        |
| \\                | 백슬래시                         |

```javascript
const template = `<ul class="nav-items">
  <li><a href="#home">Home</a></li>
  <li><a href="#news">News</a></li>
  <li><a href="#contact">Contact</a></li>
  <li><a href="#about">About</a></li>
</ul>`;

console.log(template);
/*
<ul class="nav-items">
  <li><a href="#home">Home</a></li>
  <li><a href="#news">News</a></li>
  <li><a href="#contact">Contact</a></li>
  <li><a href="#about">About</a></li>
</ul>
*/
```

- 문자열 + 문자열은 연산자를 사용해 연결 가능

```javascript
var first = 'Ung-mo';
var last = 'Lee';

// ES5: 문자열 연결
console.log('My name is ' + first + ' ' + last + '.');
// My name is Ung-mo Lee.
```

- 문자열 인터폴레이션(String Interpolation) : 템플릿 리터럴은 + 문자열 연산자를 사용하지 않아도 간단한 방법으로 문자열을 삽입할 수 있는 기능 제공

```javascript
var first = 'Ung-mo';
var last = 'Lee';

// ES6: String Interpolation
console.log(`My name is ${first} ${last}.`);
// My name is Ung-mo Lee.
```

- 문자열 인터폴레이션은 ${expresstion}으로 표현식을 감싸는데, 표현식의 평가 결과는 문자열로 강제 타입 변환 됨

```javascript
console.log(`1 + 1 = ${1 + 1}`); // 1 + 1 = 2
```



### 7. 불리언 타입

- 불리언(boolean) 타입 : 논리적 참, 거짓을 나타내는 true와 false 뿐임
- 참과 거짓으로 구분되는 조건에 의해 프로그램의 흐름을 제어하는 조건문에서 자주 사용함

```javascript
var foo = true;
console.log(foo); // true

foo = false;
console.log(foo); // false
```



### 8. undefined 타입

> undefined 타입의 값은 undefined가 유일

- 선언은 되었지만 값을 할당하지 않은 변수는 선언에 의해 확보된 메모리 공간을 빈 상태로 두지 않고 자바스크립트 엔진의 암묵적 초기화에 의해 undefined값을 갖게 됨
  - 의도적으로 undefined를 변수에 할당한다면 본래의 취지와 어긋날 뿐더러 혼란을 줄 수 있으므로 지양하자
- 변수에 값이 없다는 것을 명시하고 싶을 경우엔?
  - null 값을 할당
- 선언(Declaration)과 정의(Definition)
  - 자바스크립트의 undefined(정의되지 않은)에서 말하는 정의 : 변수에 값을 할당하여 변수의 실체를 명확히 하는 것
  - 다른 언어에서 컴파일러에게 식별자의 존재만을 알리는 것 : 선언
    컴파일러에게 변수를 생성하도록 하여 식별자와 메모리 주소가 연결되는 것 : 정의

> 자바스크립트의 경우 변수를 선언하면 정의가 이루어지기 때무에 구분이 모호

- 자바스크립트에서 선언 : 식별자가 생성되었지만 값이 아직 할당되지 않은 상태
- 자바스크립트에서 정의 : 식별자가 생성되었고 값까지 할당되어 있는 상태

```javascript
// 변수 선언. 내부적으로 undefined로 정의된다.
var foo;
// 변수 선언과 정의
var bar = 1;
// 함수 정의. 식별자가 암묵적으로 생성되고 함수 객체가 할당된다.
function baz {}
```



###9. null 타입

> null 타입의 값은 null이 유일

- 프로그래밍 언어에서 null은 변수에 값이 없다는 것을 의도적으로 명시(의도적 부재 International absence)할 때 사용
  - 대소문자 구별에 유의(case-sensitive)
- 변수에 null을 할당하는 것은 변수가 이전에 참조하던 값을 더이상 참조하지 않겠다는 의미
  - 이전에 할당되어 있던 값에 대한 참조를 명시적으로 제거하는 것을 의미하며 자바스크립트 엔진은 누구도 참조하지 않는 메모리 공간에 대해 가비지 콜렉션 수행

```javascript
var foo = 'Lee';

// 이전에 할당되어 있던 값에 대한 참조를 제거. 변수 foo는 더이상 'Lee'를 참조하지 않는다.
// 유용해 보이지는 않는다. 변수의 스코프를 좁게 만들어 변수 자체를 재빨리 소멸시키는 편이 낳다.
foo = null;
```

- 함수가 유효한 값을 반환할 수 없는 경우, 명시적으로 null을 반환
  - 조건에 부합하는 HTML 요소를 검색해 반환하는 document.querySelector 메소드는 조건에 부합하는 HTML 요소를 검색할 수 없는 경우 에러대신 null 반환

```html
<!DOCTYPE html>
<html>
<body>
  <script>
    var element = document.querySelector('.myElem');

    // HTML 문서에 myElem 클래스를 갖는 요소가 없다면 null을 반환한다.
    console.log(element); // null
  </script>
</body>
</html>
```



### 10. symbol 타입

- ES6에서 새롭게 추가된 7번째 타입으로 변경 불가능한 원시 타입의 값
- 주로 이름의 충돌 위험이 없는 객체의 유일한 프로퍼티 키(property key)를 만들기 위해 사용
- symbol 함수를 호출해 생성 : 이 때 생성된 심볼 값은 다른 심볼 값들과 다른 유일한 심볼 값

```javascript
// 심볼 값 생성
var key = Symbol('key');
console.log(typeof key); // symbol

// 객체 생성
var obj = {};

// 심볼 key를 이름의 충돌 위험이 없는 유일한 프로퍼티 키로 사용한다.
obj[key] = 'value';
console.log(obj[key]); // value
```



### 11. 객체 타입

- 자바스크립트의 데이터 타입은 원시 타입과 객체 타입으로 크게 분류
- 자바스크립트는 객체 기반의 언어이며 자바스크립트를 이루고 있는 거의 "모든 것"이 객체
  - 지금까지 살펴본 6가지 데이터 타입 이외의 값은 모두 객체 타입



### 12. 동적 타이핑

#### 12.1 동적 타입 언어와 정적 타입 언어

- 자바스크립트의 모든 값은 데이터 타입을 갖음
- 변수는 데이터 타입을 가질까?
  - 정적 타입 언어와 다르게 변수를 선언할 때 타입을 선언하지않음
  - 어떠한 데이터 타입의 값이라도 자유롭게 할당 가능
  - 하나의 변수를 선언하고 지금까지 살펴본 다양한 데이터 타입의 값을 할당한 다음 typeof 연산자로 변수의 데이터 타입을 알아볼 수 있음
- typeof 연산자 : 자신의 뒤에 위치한 피연산자의 데이터 타입을 문자열로 반환 - **정확히 말하면 변수의 데이터 타입이 아니라 변수에 할당된 값의 데이터 타입**

```javascript
var foo;
console.log(typeof foo);  // undefined

foo = 3;
console.log(typeof foo);  // number

foo = 'Hello';
console.log(typeof foo);  // string

foo = true;
console.log(typeof foo);  // boolean

foo = null;
console.log(typeof foo);  // object

foo = Symbol(); // 심볼
console.log(typeof foo);  // symbol

foo = {}; // 객체
console.log(typeof foo);  // object

foo = []; // 배열
console.log(typeof foo);  // object

foo = function () {}; // 함수
console.log(typeof foo);  // function
```

- 정적 타입 언어는 변수 선언 시점에 변수 타입이 결졍되고 변수의 타입을 변경할 수 없음
- 자바스크립트는 값을 할당하는 시점에 변수의 타입이 동적으로 결정되고 변수의 타입을 언제든 자유롭게 변경 가능
- 자바스크립트 변수는 선언이 아닌 할당에 의해 타입이 결정
  - **동적 타이핑(Dynamic typing)** : 재할당에 의해 변수 타입은 언제든 동적으로 변할 수 있음
- 자바스크립트를 정적 타입 언어와 구별하기 위해 **동적 타입(Dynamic/Weak type) 언어**라 부름
  - 대표적 동적타입 언어 : 자바스크립트, 파이썬, PHP, Ruby, Lisp, Perl 등

- 다시 질문. 변수는 타입을 갖는가?
  - 변수는 타입을 갖지 않음
  - 값은 타입을 갖음
  - 변수는 값에 묶여 있는 값의 별명 : 현재 변수에 할당되어 있는 값에 의해 변수의 타입이 동적으로 결정



#### 12.2 동적 타입 언어와 변수

- 동적 타입 언어는 변수에 어떤 데이터 타입의 값이라도 자유롭게 할당 가능
- 모든 소프트웨어 아키텍처에는 트레이드오프(trade-off)가 존재하며 모든 애플리케이션에 적합한 은 탄환(Silver bullet)은 없듯 동적 타입 언어에도 구조적인 단점 존재
- 단점 : 복잡한 프로그램에서 동적으로 변화하는 데이터 타입을 추적하기 어려움
  - 변수의 데이터 타입이 고정되어 있지 않고 동적으로 변하는 동적 타입 언어는 변수가 저장하고 있는 값을 확인하기 전에는 타입을 확인할 수 없음
  - 자바스크립트 엔진에 의해 암묵적으로 타입이 자동 변환되기도 함
  - 유연성(flexibility)은 높지만, 신뢰성(reliability)은 떨어짐
- 안정적인 프로그램을 만들기 위해 변수를 사용하기 전 데이터 타입을 체크해야 하는 경우가 있는데, 번거롭고 코드량이 증가하여 버그 발생확률과 테스트 분량을 증가시킴
- 변수 사용시 주의사항
  - 변수 사용을 적극적으로 줄임(개수가 많을수록 오류 발생 확률 상승)
  - 전역 변수는 사용하지 않도록 함(변수 생명주기를 최대한 짧게 만들자)
  - 변수보다는 상수를 사용해 값의 변경 억제
  - 변수 이름은 변수 존재 이유를 파악할 수 있도록 명명



모든 출처 : https://poiemaweb.com/