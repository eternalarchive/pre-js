# 변수

### 1. 변수란 무엇인가? 왜 필요한가?

> 변수는 데이터를 관리하기 위한 핵심 개념이다.

- 컴퓨터는 메모리를 사용해 데이터를 기억

- 메모리(memory) : 데이터를 저장할 수 있는 메모리 셀(memory cell)들의 집합체로 셀 하나의 크기는 1byte(8bit)
  - 컴퓨터는 셀의 크기인 1byte단위로 데이터를 저장(write)하거나 읽음(Read)
  - 컴퓨터는 모든 데이터를 2진수로 처리하므로 메모리에 저징되는 데이터는 데이터 종류와 상관없이 2진수
  - 각각의 셀은 고유의 메모리 주소를 갖는데, 메모리 주소는 메모리 공간의 위치를 나타내며 0부터 시작하여 메모리의 크기만큼 정수로 표현
    - ex) 4GB의 메모리는 0부터 4,294,967,295(0x00000000 ~ 0xFFFFFFFF)까지의 메모리 주소를 갖음

- 변수(Variable) : 하나의 값을 저장할 수 있는 메모리 공간에 붙인 이름 또는 메모리 공간 자체

  - 프로그래밍 언어에서 값을 저장하고 참조하는 매커니즘
  - 재사용할 수 있도록 메모리 공간을 식별할 수 있는 이름을 붙인 것

- 변수에 여러 개의 값을 저장하는 방법

  - 변수는 하나의 값을 저장하기 위한 수단으로 여러개의 값을 저장하려면 여러개의 변수를 사용
  - 배열, 객체와 같은 자료구조를 사용하면 관련이 있는 여러 개의 값을 그룹화하여 하나의 값처럼 사용할 수 있음

  ```javascript
  // 변수는 하나의 값을 저장하기 위한 수단이다.
  var userName = 'Lee';
  var userRole = 'Admin';
  
  // 객체나 배열과 같은 자료 구조를 사용하면 여러 개의 값을 하나로 그룹화하여 하나의 값처럼 사용할 수 있다.
  var user = {
    name: 'Lee',
    role: 'Admin'
  };
  
  var users = [
    { name: 'Lee', role: 'Admin' },
    { name: 'Kim', role: 'Developer' }
  ];
  ```

- 할당(assignment 대입, 저장) : 변수에 값을 저장하는 것
- 참조(reference) : 변수에 저장된 값을 읽어들이는 것
- 변수 이름은 사람을 위해 저장된 메모리 공간에 붙인 이름
  
  - 변수 이름을 통해 컴퓨터에게 참조를 요청하면 컴퓨터는 변수 이름과 매핑된 메모리 주소를 통해 메모리 공간에 접근하여 저장된 값을 반환함

```javascript
var result = 10 + 20;
result
30
```

**변수명을 잘 짓자**

- 변수는 사람이 이해할 수 있는 언어로 명명한 변수 이름을 통해 저장된 값의 의미를 명확히 할 수 있음
- 좋은 변수 이름은 가독성을 높여주는 부수적인 효과를 내므로 개발자의 의도를 명확히 나타내는 네이밍을 해야함



### 2. 식별자(identifier)

- 식별자 : 어떤 값을 구별하여 식별해낼 수 있는 이름
- 변수 이름을 식별자라고도 부름

- 변수 이름에만 국한하여 사용하지 않고 변수, 함수, 클래스 등의 이름은 모두 식별자
  - 식별자인 변수 이름으로 메모리 상에 존재하는 변수값을 식별
  - 식별자인 함수 이름으로는 메모리 상에 존재하는 함수(자바스크립트에서 함수는 값이다.)를 식별
- 식별자는 메모리상에 존재하는 어떤 값이 식별해낼 수 있어야 하므로 어떤 값이 저장되어 있는 메모리 주소를 기억해야 함

![](https://poiemaweb.com/assets/fs-images/4-5.png)

출처 : https://poiemaweb.com/

- 위 그림에서 식별자 result는 값 30을 식별할 수 있어야 하므로 값 30이 저장되어 있는 메모리 주소를 기억해야 함
- 어떤 값이 저장되어 있는 메모리 주소는 매핑 관계 정보를 기억해야 하며, 이 매핑 정보도 메모리에 저장되어야 함



### 3. 변수 선언

- 변수 선언(Variable declaration) : 변수를 생성하는 것
  - 변수 이름을 자바스크립트 엔진에 알려 등록하고 변수값을 저장하기 위한 메모리 영역의 확보를 명령하는 것
  - 변수 선언을 통해 자바스크립트 엔진은 등록된 변수 이름과 변수값을 저장하기 위한 메모리 영역을 연결하여 변수를 지속적으로 관리
- 변수를 사용하려면 반드시 선언이 필요
  - 변수를 선언할 때는 var, let, const키워드를 사용
- ES6에서 let, const 키워드가 도입되기 전까지 var가 유일한 자바스크립트 변수 선언 방법이었음
- var 키워드 단점
  - 블록 레벨 스코프를 지원하지 않고 함수 레벨 스코프를 지원하여 의도치 않게 전역 변수가 선언되어 심각한 부작용이 발생
- 키워드(keyword) : 자바스크립트 코드를 실행하는 자바스크립트 엔진이 수행할 동작을 규정한 일종의 명령어
  - 자바스크립트 엔진은 키워드를 만나면 자신이 수행해야 할 약속된 동작을 수행하며, var 키워드가 실행되면 자바스크립트 엔진은 새로운 변수를 선언
- 변수를 선언한 후 아직 변수에 값을 할당하지 않았을 경우 자바스크립트 엔진에 의해 undefined라는 값이 암묵적으로 할당되어 초기화 됨
  - undefined : 자바스크립트가 제공하는 원시 타입의 값

*** 자바스크립트 엔진은 변수 선언을 아래의 2단계를 거쳐 수행**

1. 선언 단계(Declaration phase) : 변수 이름을 등록하여 자바스크립트 엔진에 변수의 존재를 알림
2. 초기화 단계(Initialization phase) : 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 undefined를 할당
   - var 키워드 변수 선언은 선언 단계와 초기화 단계 동시 진행



- 변수 이름은 어디에 등록되는가?
  - 변수 이름을 비롯한 모든 식별자는 실행 컨텍스트(execution context)에 등록
    - 실행 컨텍스트 : 자바스크립트 엔진이 실행 가능한 코드를 평가하고 실행하기 위해 필요한 환경을 제공하고 코드 실행 결과를 실제로 관리하는 영역
    - 자바스크립트 엔진은 실행 컨텍스트를 통해 식별자와 스코프를 관리
    - 변수이름과 변수값은 실행 컨텍스트 내에 key/value 형식인 객체로 등록되어 관리
- 선언 없이 식별자에 접근하면 참조 에러(ReferenceError) 발생



### 4. 변수 선언의 실행 시점과 변수 호이스팅

```javascript
console.log(score); // undefined

var score; // 변수 선언(변수 선언문)
```

- 다음과 같이 변수 선언문보다 변수 참조 코드가 앞에 있을 경우 에러가 발생하는가?
  - 그렇지 않다. 자바스크립트 엔진은 소스 코드를 한 줄씩 순차적으로 실행하기 이전에 먼저 소스코드 전체를 평가한다.  이 때 모든 선언문을 찾아내어 식별차를 등록하고 초기화한다. 그 후 선언문을 제외한 소스 코드를 한 줄씩 순차적으로 실행한다.
    (변수 선언은 런타임(소스 코드가 한 줄씩 실행)이 아니라 구문 분석 단계에 먼저 실행된다.)

- 변수 호이스팅(Variable Hosisting) : 변수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징



### 5. 값의 할당

- 변수에 값을 할당(assignment 대입, 저장)할 때는 할당 연산자(=)를 사용
  - 우변의 값을 좌변의 변수에 할당
- 변수 선언은 런타임 이전에 먼저 실행되지만 **값의 할당은 소스 코드가 순차적으로 실행되는 시점인 런타임에 실행**

```javascript
console.log(score); // undefined

var score = 80;     // 변수 선언과 값의 할당

console.log(score); // 80
```



![](https://poiemaweb.com/assets/fs-images/4-9.png)

- 주의! 변수에 값을 할당할 때는 이전 값 undefine가 저장되어 있던 메모리 공간을 지우고 그 메모리 공간에 할당값 80을 새롭게 저장하는 것이 아니라 새로운 메모리 공간을 확보하고 그 메모리 공간에 할당 값 80을 저장하는 것
- 이 예제의 실행 결과는 무엇일까?

```javascript
console.log(score); // undefined

score = 80; // 값의 할당
var score;  // 변수 선언

console.log(score); // ??
```



### 6. 값의 재할당

- var키워드로 선언한 변수는 값을 재할당 할 수 있음
- var키워드로 선언한 변수는 선언과 동시에 undefined로 초기화되기 때문에 엄밀히 말하자면 변수에 처음으로 값을 할당하는 것도 재할당
- 만약 재할당을 할 수 없어서 변수에 저장된 값을 변경할 수 없다면 변수가 아니라 상수(Constant)라 부름
  - 상수는 한 번 정해지면 변하지 않는 값 : 단 한 번만 할당할 수 있는 변수

- **const 키워드** : ES6에서 도입된 키워드로 재할당 금지
  - 반드시 상수만을 위해 사용되지는 않음
- 가비지 컬렉터(Garbage collector) : 애플리케이션이 확보한 메모리를 주기적으로 검사하여 더 이상 사용되지 않고 있는 메모리를 해제하는 기능
  - 더 이상 사용되지 않고 있는 메모리 : 어떤 식별자도 참조하고 있지 않는 메모리 영역
  - 자바스크립트는 가비지 컬렉터를 내장하고 있는 매니지드 언어
  - 메모리 누수(memory leak)를 방지
- 언매니지드 언어(Unmanaged Language)와 매니지드 언어(Managed Language)
  - C 언어와 같은 언매니지드 언어는 개발자가 명시적으로 메모리를 할당하고 해제하기 위해 malloc()와 free()와 같은 저수준(low-level) 메모리 관리 기능 제공 : 개발자의 역량에 의해 최적의 퍼포먼스를 확보할 수 있지만 그 반대의 경우 치명적 오류 생산 가능성 존재
  - 자바스크립트와 같은 매니지드 언어는 메모리의 할당 및 해제를 위한 메모리 관리 기능을 언어 차원에서 담당하고 개발자의 직접적인 메모리 제어를 허용하지 않음 : 가비지 컬렉터가 이를 수행하며 개발자는 관여할 수 없으므로 일정한 생산성을 확보할 수 있는 장점이 있지만 퍼포먼스 면에서 손실은 감수해야 함



### 7. 값의 교환

- 두 변수의 값을 교환하는 코드를 작성하라

```javascript
var x = 1;
var y = 2;

// do somethig
var temp = x;
x = y;
y = temp;

console.log(x, y); // 2 1
```



### 8. 식별자 네이밍 규칙

- 식별자는 특수문자를 제외한 문자, 숫자, _, 달러 기호를 포함할 수 있음(하이픈-은 사용 불가) - **대소문자를 구별하므로 주의!**

- 단, 식별자는 특수문자를 제외한 문자, _, 달러 기호로 시작해야 하며 숫자로 시작하는 것은 허용하지 않음

- 예약어는 식별자로 사용할 수 없음

  - 예약어(reserved word) : 프로그래밍 언어에서 사용되고 있거나 사용될 예정인 단어

  - 자바스크립트의 예약어

    await break case catch class const continue debugger default delete do else enum export extends false finally for function if implements* import in Instanceof interface* let* new null package* private* protected* public* return super static* Switch this throw true try typeof var void while with yield*

    - 식별자로 사용 가능하나 Strict Mode에서는 사용 불가

- 변수는 쉼표로 구분해 하나의 문에서 여러개를 한 번에 선언할 수 있으나 가독성이 나빠지므로 권장하지는 않음

- ES5부터 식별자에 유니코드 문자를 허용하므로 알파벳 외 한글, 일본어도 식별자로 사용할 수 있으나 바람직하지 않으므로 권장하지 않음

- 네이밍 컨벤션

  - 카멜 케이스 : firstName
  - 스네이크 케이스 : first_name
  - 파스칼 케이스 : FirstName
  - 헝가리언 케이스 : strFirstName (type + identifier)

> 일반적으로

- 변수나 함수의 이름에는 카멜 케이스
- 생성자 함수, 클래스 이름에는 파스칼 케이스



모든 내용과 이미지 출처 : https://poiemaweb.com/